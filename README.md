# MiniMalwareDetector - Тестовое задание в рамках отбора на Safeboard
## Задание

#### Требуется реализовать два приложения, используя .NET Core / .NET:

 - сервисное приложение, реализующее простой REST API, который предоставляет ресурс для создания задач на сканирование файлов в директории и получения статуса задачи по идентификатору
 - утилиту, работающую из командной строки, отправляющую сервисному приложению команды на создание и просмотр состояния задач.

#### В рамках задачи определено 3 типа "подозрительного" содержимого в файле:

- файл с расширением .js, содержащий строку <script>evil_script()</script>
- любой файл, содержащий строку: rm -rf %userprofile%\Documents
- любой файл, содержащий строку: Rundll32 sus.dll SusEntry

#### После завершения команды создание задачи на сканирование должен быть выведен уникальный идентификатор задачи.

**После завершения команды просмотра статуса задачи может быть выведено два результата**: статус "задача еще выполняется" или отчет о сканировании, в котором присутствует следующая информация:
- путь к директории, сканирование которой производилось
- общее количество обработанных файлов
- количество обнаружений на каждый тип "подозрительного" содержимого
- количество ошибок анализа файлов (например, не хватает прав на чтение файла)
- время выполнения утилиты.
#### Примечание:
 - сервисное приложение не имеет постоянного хранилища состояния (каждый запуск как чистый лист)
 - в каждом файле может присутствовать только один тип "подозрительного" содержимого
 - сервисное приложение и утилита работают на одном и том же устройстве
 - рекомендуется максимальное использования (утилизация) вычислительных ресурсов устройства, на котором выполняется утилита.

## Решение

**Core** - Библиотека классов, содержит бизнес логику

**Data** - Библиотека классов, поставщик данных для бизнес логики

**Server** - Web API, предоставляет ресурс создания задачи сканирования и получение отчета

**Client** - Консольное приложение, работает из командной строки, отправляет запросы на сканирование и получание отчета

### Запуск и тестирование

Запускается локально сервер, слушает 5001 порт
Клиент запускается через командную строку. Виды команд у клиента:
- scan путь_папки_для_сканирования
- status id_сканирования

Тестовая директория есть в проекте клиента.

### Логика работы
Клиент отправляет Post запрос на сервер, передавая ему файлы из директории.
Сервер принимает файлы, считывает Stream и получает текст из файлов, полученый текст отправляет в ассинхронный процесс сканирования и отправляет клиенту id сканирования.
Так же клиент может отправить Get запрос с id сканирования, сервер получает этот id, если сканирование завершилось, то формирует отчет и возвращает его, а если процесс сканирования идет, то отправляет, что сканирование идет.
